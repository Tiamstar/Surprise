<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æˆ‘ä»¬çš„åœ£è¯å›å¿†å½•</title>
    <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&display=swap" rel="stylesheet">
    <style>
        :root {
            /* å°ºå¯¸å®šä¹‰ */
            --cube-size: 260px;
            --img-height: 220px;
            --text-height: 40px;
            --mobile-size: 200px;
            --mobile-img-height: 170px;
            --mobile-text-height: 30px;
            /* åœ£è¯ä¸»é¢˜è‰² */
            --christmas-red: #d42426;
            --christmas-green: #165b33;
            --gold: #ffd700;
        }

        body, html {
            margin: 0; padding: 0; width: 100%; height: 100%;
            overflow: hidden; background: radial-gradient(circle at center, #1a1a1a 0%, #000 100%);
            font-family: "Microsoft YaHei", sans-serif;
        }

        /* èƒŒæ™¯ç”»å¸ƒ (é›ªèŠ±+æ˜Ÿæ˜Ÿ) - å±‚çº§åœ¨æ ‘å’Œç«‹æ–¹ä½“ä¹‹é—´ */
        #snow-canvas {
            position: fixed; top: 0; left: 0;
            width: 100%; height: 100%; z-index: 5;
            pointer-events: none;
        }

        /* åˆå§‹è’™å±‚ */
        #overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.9); z-index: 100;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            color: white; cursor: pointer; transition: 0.5s;
        }

        /* --- æ–°å¢ï¼šèƒŒæ™¯è£…é¥°å±‚ (åŠ¨æ€SVGæ ‘) --- */
        .decorations {
            position: absolute;
            width: 100%; height: 100%;
            pointer-events: none;
            z-index: 2; /* åœ¨èƒŒæ™¯æœ€åº•å±‚ */
        }

        /* æ ‘çš„é€šç”¨æ ·å¼ */
        .tree-container {
            position: absolute;
            bottom: 5%; /* ç¨å¾®æŠ¬é«˜ä¸€ç‚¹ */
            /* æ ‘å˜å¤§äº† */
            width: 250px;
            height: auto;
            filter: drop-shadow(0 0 15px rgba(22, 91, 51, 0.6));
            /* è®¾ç½®æ—‹è½¬ä¸­å¿ƒåœ¨åº•éƒ¨ä¸­é—´ï¼Œç”¨äºæ‘‡æ‘†åŠ¨ç”» */
            transform-origin: bottom center;
            animation: sway 4s ease-in-out infinite alternate;
        }

        /* å·¦å³ä¸¤æ£µæ ‘çš„ä¸ªæ€§åŒ–ä½ç½®å’ŒåŠ¨ç”»å»¶è¿Ÿï¼Œçœ‹èµ·æ¥æ›´è‡ªç„¶ */
        .tree-left {
            left: 5%;
            animation-delay: 0s;
        }
        .tree-right {
            right: 5%;
            transform: scaleX(-1); /* é•œåƒç¿»è½¬ï¼Œè®©ä¸¤æ£µæ ‘å¯¹ç§° */
            animation-delay: 2s; /* é”™å¼€åŠ¨ç”»æ—¶é—´ */
        }

        /* æ ‘çš„æ‘‡æ‘†åŠ¨ç”» */
        @keyframes sway {
            0% { transform: rotate(2deg); }
            100% { transform: rotate(-2deg); }
        }
        /* ------------------------------- */


        /* 3D åœºæ™¯å®¹å™¨ */
        .scene {
            position: relative; z-index: 10;
            width: 100%; height: 100vh;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            perspective: 1000px;
        }

        /* ç«‹æ–¹ä½“æœ¬ä½“ */
        .cube {
            width: var(--cube-size); height: var(--cube-size);
            position: relative; transform-style: preserve-3d;
            transform: rotateX(-20deg) rotateY(20deg);
            animation: rotateCube 25s infinite linear;
        }

        @keyframes rotateCube {
            0% { transform: rotateX(0deg) rotateY(0deg); }
            100% { transform: rotateX(360deg) rotateY(360deg); }
        }

        /* cube-face å®¹å™¨ */
        .cube-face {
            position: absolute;
            width: var(--cube-size); height: var(--cube-size);
            border: 2px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 0 15px var(--christmas-red), 0 0 30px var(--christmas-green);
            background: #000;
            display: flex; flex-direction: column;
        }

        .cube-face img {
            width: 100%; height: var(--img-height);
            object-fit: cover; opacity: 0.95;
        }

        .photo-caption {
            height: var(--text-height); line-height: var(--text-height);
            text-align: center; color: white; font-size: 14px;
            background: rgba(212, 36, 38, 0.85);
            white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
            padding: 0 5px; font-weight: bold;
        }
        
        /* 3D å®šä½ */
        .front  { transform: rotateY(0deg) translateZ(calc(var(--cube-size) / 2)); }
        .back   { transform: rotateY(180deg) translateZ(calc(var(--cube-size) / 2)); }
        .right  { transform: rotateY(90deg) translateZ(calc(var(--cube-size) / 2)); }
        .left   { transform: rotateY(-90deg) translateZ(calc(var(--cube-size) / 2)); }
        .top    { transform: rotateX(90deg) translateZ(calc(var(--cube-size) / 2)); }
        .bottom { transform: rotateX(-90deg) translateZ(calc(var(--cube-size) / 2)); }

        /* åº•éƒ¨æ–‡æ¡ˆ */
        .lyrics {
            margin-top: 70px; text-align: center; color: #fff;
            z-index: 20; line-height: 1.5;
        }
        #main-title {
            font-family: 'Great Vibes', cursive;
            font-size: 4em; margin: 0; color: var(--christmas-red);
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5), 0 0 20px var(--christmas-red);
        }
        #sub-text {
            font-size: 1.1em; margin-top: 10px; color: #eee;
            text-shadow: 0 0 10px var(--christmas-green);
        }

        /* æ‰‹æœºç«¯é€‚é… */
        @media (max-width: 600px) {
            /* æ‰‹æœºç«¯æ ‘ç¨å¾®å°ä¸€ç‚¹ */
            .tree-container { width: 160px; bottom: 8%; }
            .tree-left { left: -20px; }
            .tree-right { right: -20px; }

            #main-title { font-size: 3em; }
            .cube { width: var(--mobile-size); height: var(--mobile-size); }
            .cube-face { width: var(--mobile-size); height: var(--mobile-size); }
            .cube-face img { height: var(--mobile-img-height); }
            .photo-caption { height: var(--mobile-text-height); line-height: var(--mobile-text-height); font-size: 12px; }
            .front  { transform: rotateY(0deg) translateZ(calc(var(--mobile-size) / 2)); }
            .back   { transform: rotateY(180deg) translateZ(calc(var(--mobile-size) / 2)); }
            .right  { transform: rotateY(90deg) translateZ(calc(var(--mobile-size) / 2)); }
            .left   { transform: rotateY(-90deg) translateZ(calc(var(--mobile-size) / 2)); }
            .top    { transform: rotateX(90deg) translateZ(calc(var(--mobile-size) / 2)); }
            .bottom { transform: rotateX(-90deg) translateZ(calc(var(--mobile-size) / 2)); }
        }
    </style>
</head>
<body>

    <div id="overlay" onclick="startExperience()">
        <h2 style="font-size: 3em;">ğŸ„âœ¨ğŸ</h2>
        <p style="font-size: 1.2em; margin: 20px 0;">äº²çˆ±çš„å°é½å®å®ï¼Œåœ£è¯å¿«ä¹</p>
        <p style="font-size: 0.8em; opacity: 0.7; animation: blink 2s infinite;">( ç‚¹å‡»å±å¹•å¼€å¯ä¸“å±æƒŠå–œ )</p>
    </div>

    <canvas id="snow-canvas"></canvas>
    
    <div class="decorations">
        <div class="tree-container tree-left">
            <svg viewBox="0 0 100 150" xmlns="http://www.w3.org/2000/svg">
                <rect x="42" y="130" width="16" height="20" fill="#4d2600"/>
                <polygon points="50,10 10,130 90,130" fill="var(--christmas-green)"/>
                <polygon points="50,30 20,110 80,110" fill="#1e7b45"/>
                <polygon points="50,50 30,90 70,90" fill="#269c58"/>
                <circle cx="30" cy="120" r="4" fill="var(--christmas-red)" />
                <circle cx="70" cy="115" r="4" fill="var(--gold)" />
                <circle cx="50" cy="100" r="5" fill="#3498db" />
                <circle cx="40" cy="80" r="4" fill="var(--gold)" />
                <circle cx="60" cy="70" r="4" fill="var(--christmas-red)" />
                <circle cx="50" cy="60" r="3" fill="var(--gold)" />
                <polygon points="50,5 53,15 63,15 55,22 58,32 50,25 42,32 45,22 37,15 47,15" fill="var(--gold)"/>
            </svg>
        </div>
        <div class="tree-container tree-right">
             <svg viewBox="0 0 100 150" xmlns="http://www.w3.org/2000/svg">
                <rect x="42" y="130" width="16" height="20" fill="#4d2600"/>
                <polygon points="50,10 10,130 90,130" fill="var(--christmas-green)"/>
                <polygon points="50,30 20,110 80,110" fill="#1e7b45"/>
                <polygon points="50,50 30,90 70,90" fill="#269c58"/>
                <circle cx="30" cy="120" r="4" fill="var(--christmas-red)" />
                <circle cx="70" cy="115" r="4" fill="var(--gold)" />
                <circle cx="50" cy="100" r="5" fill="#3498db" />
                <circle cx="40" cy="80" r="4" fill="var(--gold)" />
                <circle cx="60" cy="70" r="4" fill="var(--christmas-red)" />
                <circle cx="50" cy="60" r="3" fill="var(--gold)" />
                <polygon points="50,5 53,15 63,15 55,22 58,32 50,25 42,32 45,22 37,15 47,15" fill="var(--gold)"/>
            </svg>
        </div>
    </div>

    <div class="scene">
        <div class="cube" id="cube">
            <div class="cube-face front">
                <img src="1.jpg" alt="ç…§ç‰‡1">
                <div class="photo-caption">è¿™æ˜¯æˆ‘ä»¬ç¬¬ä¸€æ¬¡æ‰“è§†é¢‘ï¼Œå¥½æç¬‘</div>
            </div>
            <div class="cube-face back">
                <img src="2.jpg" alt="ç…§ç‰‡2">
                <div class="photo-caption">ç¬¬ä¸€å¼ ç…§ç‰‡ï¼Œä¸å¤ªæ•¢äº²å¯†çš„</div>
            </div>
            <div class="cube-face right">
                <img src="3.jpg" alt="ç…§ç‰‡3">
                <div class="photo-caption">ç¬¬ä¸€æ¬¡é™ªå°å®åƒæµ·åº•æï¼Œä¹Ÿæ˜¯å°å®ç¬¬ä¸€æ¬¡åƒæµ·åº•æ</div>
            </div>
            <div class="cube-face left">
                <img src="4.jpg" alt="ç…§ç‰‡4">
                <div class="photo-caption">ç¬¬ä¸€å¼ ç‰µæ‰‹ç…§ï¼Œå˜¿å˜¿</div>
            </div>
            <div class="cube-face top">
                <img src="5.jpg" alt="ç…§ç‰‡5">
                <div class="photo-caption">å°å®ç§äººæ‘„å½±å¸ˆçš„ç¬¬ä¸€å¼ æ°ä½œ</div>
            </div>
            <div class="cube-face bottom">
                <img src="6.jpg" alt="ç…§ç‰‡6">
                <div class="photo-caption">è„¸çº¢çº¢çš„æˆ‘ä¸æ˜¯é†‰äº†ï¼Œè€Œæ˜¯çˆ±äº†</div>
            </div>
        </div>

        <div class="lyrics">
            <h1 id="main-title">Merry Christmas</h1>
            <p id="sub-text">ä¸€å¼ å¼ ç…§ç‰‡ï¼Œåˆ»ä¸‹æˆ‘ä»¬ç›¸çˆ±çš„è¯æ®</p>
        </div>
    </div>

    <audio id="bgm" src="bgm.mp3" loop></audio>

    <script>
        const styleSheet = document.styleSheets[0];
        styleSheet.insertRule(`
            @keyframes blink { 0% { opacity: 0.4; } 50% { opacity: 1; } 100% { opacity: 0.4; } }
        `, styleSheet.cssRules.length);

        const canvas = document.getElementById('snow-canvas');
        const ctx = canvas.getContext('2d');
        let width, height, particles = [];

        function initCanvas() {
            width = window.innerWidth;
            height = window.innerHeight;
            canvas.width = width;
            canvas.height = height;
            particles = [];
            // ç”Ÿæˆ250ä¸ªç²’å­
            for (let i = 0; i < 250; i++) {
                // 20%çš„æ¦‚ç‡ç”Ÿæˆé‡‘è‰²çš„æ˜Ÿæ˜Ÿï¼Œ80%æ˜¯ç™½è‰²çš„é›ªèŠ±
                const isStar = Math.random() < 0.2; 
                particles.push({
                    x: Math.random() * width,
                    y: Math.random() * height,
                    // æ˜Ÿæ˜Ÿç¨å¾®å¤§ä¸€ç‚¹ï¼Œé›ªèŠ±å°ä¸€ç‚¹
                    r: isStar ? Math.random() * 3 + 2 : Math.random() * 3 + 1, 
                    d: Math.random() * 1,
                    type: isStar ? 'star' : 'snow',
                    // æ˜Ÿæ˜Ÿæœ‰è½»å¾®çš„é—ªçƒæ•ˆæœå‚æ•°
                    opacity: isStar ? Math.random() : 0.8,
                    fadeDir: Math.random() > 0.5 ? 1 : -1
                });
            }
        }

        function drawParticles() {
            ctx.clearRect(0, 0, width, height);
            for (let p of particles) {
                ctx.beginPath();
                if (p.type === 'star') {
                    // ç»˜åˆ¶æ˜Ÿæ˜Ÿï¼šé‡‘è‰²ï¼Œå¸¦é—ªçƒ
                    ctx.fillStyle = `rgba(255, 215, 0, ${p.opacity})`; // é‡‘è‰²
                    // ç®€å•çš„æ˜Ÿæ˜Ÿå½¢çŠ¶ï¼ˆè±å½¢ï¼‰
                    ctx.moveTo(p.x, p.y - p.r);
                    ctx.lineTo(p.x + p.r, p.y);
                    ctx.lineTo(p.x, p.y + p.r);
                    ctx.lineTo(p.x - p.r, p.y);
                } else {
                    // ç»˜åˆ¶é›ªèŠ±ï¼šç™½è‰²åŠé€æ˜åœ†å½¢
                    ctx.fillStyle = "rgba(255, 255, 255, 0.8)";
                    ctx.arc(p.x, p.y, p.r, 0, Math.PI * 2, true);
                }
                ctx.fill();
            }
            updateParticles();
        }

        function updateParticles() {
            for (let p of particles) {
                // ç²’å­ä¸‹è½
                p.y += Math.cos(p.d) + 0.5 + p.r / 3;
                p.x += Math.sin(p.d) * 0.5;

                // å¦‚æœæ˜¯æ˜Ÿæ˜Ÿï¼Œå¤„ç†é—ªçƒ
                if (p.type === 'star') {
                    p.opacity += p.fadeDir * 0.01;
                    if (p.opacity >= 1 || p.opacity <= 0.4) { p.fadeDir *= -1; }
                }

                // å¾ªç¯åˆ©ç”¨
                if (p.y > height) {
                    p.y = -10;
                    p.x = Math.random() * width;
                }
            }
        }

        function animate() {
            drawParticles();
            requestAnimationFrame(animate);
        }

        function startExperience() {
            document.getElementById('overlay').style.opacity = '0';
            setTimeout(() => {
                document.getElementById('overlay').style.display = 'none';
            }, 500);
            document.getElementById('bgm').play();
        }

        window.addEventListener('resize', initCanvas);
        initCanvas();
        animate();
    </script>
</body>
</html>
