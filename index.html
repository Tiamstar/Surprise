<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ç»™æœ€ç‰¹åˆ«çš„ä½•å©§é½åŒå­¦</title>
    <style>
        /* å…¨å±€æ ·å¼é‡ç½® */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: linear-gradient(135deg, #fce3ec 0%, #ffe6e6 100%);
            overflow: hidden;
            font-family: 'Microsoft YaHei', 'PingFang SC', sans-serif;
            height: 100vh;
            width: 100vw;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
        }

        /* èƒŒæ™¯æ¼‚æµ®ç²’å­ç”»å¸ƒ */
        #bgCanvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            pointer-events: none;
        }

        /* åˆå§‹æŒ‰é’®å®¹å™¨ */
        .start-container {
            z-index: 100;
            text-align: center;
            transition: opacity 0.8s ease;
        }

        /* å¿ƒåŠ¨æŒ‰é’® */
        .heart-btn {
            background: #ff6b81;
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.2rem;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(255, 107, 129, 0.4);
            animation: pulse 1.5s infinite;
            position: relative;
            overflow: hidden;
            font-weight: bold;
            letter-spacing: 2px;
        }

        .heart-btn:active {
            transform: scale(0.95);
        }

        /* æŒ‰é’®å¿ƒè·³åŠ¨ç”» */
        @keyframes pulse {
            0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(255, 107, 129, 0.7); }
            70% { transform: scale(1.05); box-shadow: 0 0 0 10px rgba(255, 107, 129, 0); }
            100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(255, 107, 129, 0); }
        }

        /* æ–‡æœ¬æ°”æ³¡æ ·å¼ */
        .message-bubble {
            position: absolute;
            background: rgba(255, 255, 255, 0.9);
            color: #ff4757;
            padding: 8px 12px;
            border-radius: 12px;
            font-size: 0.9rem;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            white-space: nowrap;
            opacity: 0;
            transform: scale(0);
            transition: all 1.5s cubic-bezier(0.25, 0.8, 0.25, 1);
            z-index: 10;
            pointer-events: none; /* è®©æ°”æ³¡ä¸é˜»æŒ¡ç‚¹å‡» */
            border: 1px solid #ffd1d1;
        }

        /* ç§»åŠ¨åˆ°å¿ƒå½¢æ—¶çš„æ ·å¼è¦†ç›– */
        .message-bubble.in-heart {
            font-size: 0.75rem; /* å­—ä½“å˜å°ä¸€ç‚¹ä»¥é€‚åº”å½¢çŠ¶ */
            padding: 4px 6px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            box-shadow: 0 1px 4px rgba(255, 71, 87, 0.2);
        }

        /* ä¸­å¤®å¤§çˆ±å¿ƒçš„è·³åŠ¨æ•ˆæœ */
        .heart-wrapper {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            pointer-events: none;
            display: none; /* åˆå§‹éšè— */
        }
        
        .heart-beat-anim {
            animation: heartBeat 1.3s infinite ease-in-out;
            transform-origin: center center;
            width: 100%;
            height: 100%;
        }

        @keyframes heartBeat {
            0% { transform: scale(1); }
            15% { transform: scale(1.05); }
            30% { transform: scale(1); }
            45% { transform: scale(1.05); }
            60% { transform: scale(1); }
            100% { transform: scale(1); }
        }

    </style>
</head>
<body>

    <!-- èƒŒæ™¯ç‰¹æ•ˆç”»å¸ƒ -->
    <canvas id="bgCanvas"></canvas>

    <!-- å¯åŠ¨æŒ‰é’® -->
    <div class="start-container" id="startContainer">
        <button class="heart-btn" onclick="startShow()">ç‚¹æˆ‘æ¥æ”¶å…³å¿ƒ ğŸ’Œ</button>
    </div>

    <!-- æ°”æ³¡å®¹å™¨ -->
    <div class="heart-wrapper" id="heartWrapper">
        <div class="heart-beat-anim" id="messagesContainer"></div>
    </div>

    <script>
        // --- 1. å®šä¹‰å…³å¿ƒçš„è¯è¯­ (ä½ å¯ä»¥éšæ„ä¿®æ”¹è¿™é‡Œçš„æ–‡å­—) ---
        const messages = [
            "è®°å¾—æŒ‰æ—¶åƒé¥­ ğŸš", "å¤©å†·åŠ è¡£ ğŸ§¥", "ä¸è¦ç†¬å¤œ ğŸŒ™", "å¤šå–çƒ­æ°´ ğŸ’§",
            "ä½ æœ€å¯çˆ±äº† ğŸ¬", "æƒ³ä½ æ¯ä¸€å¤© ğŸ“…", "ç´¯äº†å°±ä¼‘æ¯ ğŸ›Œ", "æ°¸è¿œé™ªç€ä½  ğŸ‘«",
            "ä¸ç®¡æ˜¯æ™´å¤© â˜€ï¸", "è¿˜æ˜¯ä¸‹é›¨ ğŸŒ§ï¸", "æˆ‘éƒ½åœ¨ â¤ï¸", "åˆ«å¤ªè¾›è‹¦ ğŸ’ª",
            "è®°å¾—åƒæ—©é¤ ğŸ¥›", "æ™šå®‰å¥½æ¢¦ ğŸ’¤", "ä½ æ˜¯æˆ‘çš„å”¯ä¸€ ğŸ¦„", "å¿ƒæƒ…è¦ç¾ç¾å“’ âœ¨",
            "æŠ±æŠ±ä½  ğŸ«‚", "æ²¡æœ‰ä»€ä¹ˆè¿‡ä¸å»çš„ ğŸŒˆ", "æˆ‘ä¼šä¸€ç›´å® ä½  ğŸ­", "ä½ æ˜¯æœ€æ£’çš„ ğŸ‘",
            "ç…§é¡¾å¥½è‡ªå·± ğŸ’Š", "å‡ºé—¨æ³¨æ„å®‰å…¨ ğŸš¦", "è®°å¾—æƒ³æˆ‘å“¦ ğŸ’­", "ä½ æ˜¯æˆ‘çš„å°ç¡®å¹¸ ğŸ€",
            "æˆ‘ä¼šåŠªåŠ›èµšé’± ğŸ’°", "å¸¦ä½ å»åƒå¥½åƒçš„ ğŸ”", "ä¸è®¸çš±çœ‰ ğŸ˜ ", "ç¬‘å£å¸¸å¼€ ğŸ˜„",
            "åšä½ çš„é¿é£æ¸¯ ğŸ ", "çˆ±ä½ ä¸‰åƒé ğŸ¤Ÿ", "æˆ‘çš„çœ¼é‡Œåªæœ‰ä½  ğŸ‘€", "æœªæ¥æœ‰æˆ‘ ğŸ’",
            "ä¸è¦é¥¿è‚šå­ ğŸ¥¨", "ä»Šå¤©ä¹Ÿå¾ˆæƒ³ä½  ğŸ””", "æ‘¸æ‘¸å¤´ ğŸ‘‹"
        ];

        // ç¡®ä¿æ¶ˆæ¯æ•°é‡è¶³å¤Ÿå¤šï¼Œä¸å¤Ÿå°±å¾ªç¯å¡«å……ï¼Œä¸ºäº†æ‹¼æˆçˆ±å¿ƒéœ€è¦è¾ƒå¤šæ•°é‡
        const totalPoints = 60; // æ„æˆçˆ±å¿ƒçš„ç‚¹æ•°
        let displayMessages = [];
        while (displayMessages.length < totalPoints) {
            displayMessages = displayMessages.concat(messages);
        }
        displayMessages = displayMessages.slice(0, totalPoints);


        // --- 2. æ ¸å¿ƒé€»è¾‘ ---

        function startShow() {
            // éšè—æŒ‰é’®
            document.getElementById('startContainer').style.opacity = '0';
            setTimeout(() => {
                document.getElementById('startContainer').style.display = 'none';
            }, 800);

            const container = document.getElementById('messagesContainer');
            document.getElementById('heartWrapper').style.display = 'block';

            // å±å¹•å®½é«˜
            const w = window.innerWidth;
            const h = window.innerHeight;

            // ç¬¬ä¸€é˜¶æ®µï¼šéšæœºæ•£å¸ƒæ°”æ³¡
            const bubbles = [];
            displayMessages.forEach((msg, index) => {
                const el = document.createElement('div');
                el.classList.add('message-bubble');
                el.innerText = msg;
                
                // éšæœºä½ç½®ï¼ˆç¨åç¦»ä¸­å¿ƒï¼Œé¿å…é‡å å¤ªå¤šï¼‰
                const randomX = (Math.random() * w * 0.8) + (w * 0.1); 
                const randomY = (Math.random() * h * 0.8) + (h * 0.1);

                el.style.left = randomX + 'px';
                el.style.top = randomY + 'px';

                // éšæœºå»¶è¿Ÿå‡ºç°ï¼Œåˆ¶é€ â€œå¼¹å‡ºâ€æ„Ÿ
                const delay = Math.random() * 2000;
                
                container.appendChild(el);
                bubbles.push(el);

                setTimeout(() => {
                    el.style.opacity = '1';
                    el.style.transform = 'scale(1)';
                }, delay);
            });

            // ç¬¬äºŒé˜¶æ®µï¼šæ±‡èšæˆçˆ±å¿ƒ (å»¶è¿Ÿ3ç§’åå¼€å§‹)
            setTimeout(() => {
                arrangeInHeart(bubbles);
            }, 3500);
        }

        // --- 3. çˆ±å¿ƒå½¢çŠ¶ç®—æ³• ---
        function arrangeInHeart(elements) {
            const count = elements.length;
            const w = window.innerWidth;
            const h = window.innerHeight;
            const centerX = w / 2;
            const centerY = h / 2;

            // æ ¹æ®å±å¹•å¤§å°è°ƒæ•´çˆ±å¿ƒç¼©æ”¾æ¯”ä¾‹
            const scale = Math.min(w, h) / 35; 

            elements.forEach((el, i) => {
                // ä½¿ç”¨çˆ±å¿ƒå‚æ•°æ–¹ç¨‹
                // t ä» 0 åˆ° 2*PI
                // ä¸ºäº†è®©ç‚¹åˆ†å¸ƒå‡åŒ€ï¼Œæˆ‘ä»¬æŒ‰ç…§ç´¢å¼•åˆ†æ®µ
                const t = (Math.PI * 2 * i) / count;

                // çˆ±å¿ƒå…¬å¼
                // x = 16 * sin(t)^3
                // y = 13 * cos(t) - 5 * cos(2t) - 2 * cos(3t) - cos(4t)
                const x = 16 * Math.pow(Math.sin(t), 3);
                const y = 13 * Math.cos(t) - 5 * Math.cos(2*t) - 2 * Math.cos(3*t) - Math.cos(4*t);

                // è½¬æ¢åæ ‡åˆ°å±å¹•ä¸­å¿ƒ
                // æ³¨æ„ï¼šç½‘é¡µåæ ‡ç³»Yè½´å‘ä¸‹ï¼Œè€Œæ•°å­¦åæ ‡ç³»Yè½´å‘ä¸Šï¼Œæ‰€ä»¥Yè¦å–å
                const finalX = centerX + (x * scale); 
                const finalY = centerY - (y * scale) - (2 * scale); // ç¨å¾®å‘ä¸Šæä¸€ç‚¹

                // æ·»åŠ ç‰¹æ®Šæ ·å¼ç±»
                el.classList.add('in-heart');
                
                // è®¾ç½®æ–°ä½ç½®
                // æˆ‘ä»¬éœ€è¦å‡å»å…ƒç´ è‡ªèº«å®½é«˜çš„ä¸€åŠæ¥å±…ä¸­
                // ç”±äºå…ƒç´ ç°åœ¨æ˜¯absoluteï¼Œå¹¶ä¸”å®½é«˜ä¸å›ºå®šï¼Œè¿™é‡Œåšä¸€ä¸ªä¼°ç®—ä¿®æ­£
                // æˆ–è€…åˆ©ç”¨ transform: translate(-50%, -50%)
                el.style.left = finalX + 'px';
                el.style.top = finalY + 'px';
                el.style.transform = 'translate(-50%, -50%)';
            });
        }


        // --- 4. èƒŒæ™¯ç‰¹æ•ˆ (Canvas ç²’å­) ---
        const canvas = document.getElementById('bgCanvas');
        const ctx = canvas.getContext('2d');
        let width, height;
        let particles = [];

        function resize() {
            width = canvas.width = window.innerWidth;
            height = canvas.height = window.innerHeight;
        }
        window.addEventListener('resize', resize);
        resize();

        class Particle {
            constructor() {
                this.reset();
            }
            reset() {
                this.x = Math.random() * width;
                this.y = height + Math.random() * 100; // ä»åº•éƒ¨ä¸‹æ–¹å¼€å§‹
                this.speed = 0.5 + Math.random() * 1.5;
                this.size = 1 + Math.random() * 3;
                this.opacity = 0.1 + Math.random() * 0.4;
                this.color = `rgba(255, ${100 + Math.random() * 100}, ${150 + Math.random() * 105}, ${this.opacity})`;
            }
            update() {
                this.y -= this.speed;
                if (this.y < -10) {
                    this.reset();
                }
            }
            draw() {
                ctx.fillStyle = this.color;
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                ctx.fill();
            }
        }

        function initParticles() {
            for (let i = 0; i < 60; i++) {
                particles.push(new Particle());
            }
        }

        function animateBg() {
            ctx.clearRect(0, 0, width, height);
            particles.forEach(p => {
                p.update();
                p.draw();
            });
            requestAnimationFrame(animateBg);
        }

        initParticles();
        animateBg();

    </script>
</body>

</html>
